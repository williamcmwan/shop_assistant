11:10:13 PM [express] serving on port 3000
üîß Extraction service created with backend: gemini_fallback
üöÄ Starting extraction with backend: gemini_fallback
‚úÖ Extraction services initialized
ü§ñ Using Gemini API with OCR fallback
üîÑ Using Gemini API for extraction...
Gemini API response: {
  "candidates": [
    {
      "content": {
        "parts": [
          {
            "text": "```json\n{\n  \"productName\": \"Chestnut Mushrooms\",\n  \"price\": 1.15,\n  \"confidence\": 0.9,\n  \"discount\": {\n    \"type\": \"bulk_price\",\n    \"quantity\": 2,\n    \"value\": 2.0,\n    \"display\": \"(2 for ‚Ç¨2)\"\n  }\n}\n```"
          }
        ],
        "role": "model"
      },
      "finishReason": "STOP",
      "avgLogprobs": -0.00539510483029245
    }
  ],
  "usageMetadata": {
    "promptTokenCount": 856,
    "candidatesTokenCount": 87,
    "totalTokenCount": 943,
    "promptTokensDetails": [
      {
        "modality": "TEXT",
        "tokenCount": 598
      },
      {
        "modality": "IMAGE",
        "tokenCount": 258
      }
    ],
    "candidatesTokensDetails": [
      {
        "modality": "TEXT",
        "tokenCount": 87
      }
    ]
  },
  "modelVersion": "gemini-2.0-flash-lite",
  "responseId": "9AGhaKxgo_6qww_i1YaJBw"
}
üìä Logged API call: Gemini - SUCCESS - 1.620s
‚úÖ Gemini extraction successful: {
  productName: 'Chestnut Mushrooms',
  price: 1.15,
  confidence: 0.9,
  discount: { type: 'bulk_price', quantity: 2, value: 2, display: '(2 for ‚Ç¨2)' }
}
‚úÖ Discount detected by Gemini: { type: 'bulk_price', quantity: 2, value: 2, display: '(2 for ‚Ç¨2)' }
‚úÖ Gemini extraction successful, no fallback needed
‚è±Ô∏è Extraction completed in 1625ms
11:11:01 PM [express] POST /api/ocr 200 in 1627ms :: {"success":true,"productName":"Chestnut Mushroom‚Ä¶
